(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0ca8":function(t,e,i){},"8b24":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("EditorController")},n=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"grid","grid-template-columns":"20% 60% 20%",height:"900px","max-height":"90vh"}},[t.editor.shapesListVisible?i("q-card",{staticClass:"bg-primary"},[i("ShapeList",{attrs:{shapes:t.editor.shapes,selectedShapeId:t.editor.selectedShapeId},on:{"item-clicked":t.HandleListItemClick,"delete-item-clicked":t.HandleDeleteClicked,"visibility-clicked":t.HandleVisibilityClicked,"lock-clicked":t.HandleLockClicked}})],1):t._e(),i("div",{ref:"canvasContainer",staticClass:"canvas-container",staticStyle:{overflow:"scroll"},on:{contextmenu:t.SaveClickCoordinates}},[i("MainCanvas",{ref:"drawing",attrs:{shapes:t.editor.shapes,allowTransforms:!0,selectedShape:t.editor.selectedShapeId},on:{"shape-selected":function(e){return t.editor.selectedShapeId=e}}}),i("ToolController",{staticStyle:{position:"absolute",left:"0px",top:"0px"},attrs:{width:t.editor.width,height:t.editor.height},on:{shapeCompleted:t.HandleShapeComplete}}),i("q-menu",{attrs:{"touch-position":"","context-menu":"","transition-hide":"none","auto-close":""}},[i("q-list",{staticStyle:{"min-width":"100px"},attrs:{dense:""}},[void 0!=t.editor.selectedShapeId?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.HandleSendToFront()}}},[i("q-item-section",[t._v("Send to Front")])],1):t._e(),void 0!=t.editor.selectedShapeId?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.HandleSendToBack()}}},[i("q-item-section",[t._v("Send to Back")])],1):t._e(),void 0!=t.editor.selectedShapeId?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.HandleCopyClicked}},[i("q-item-section",[t._v("Copy")])],1):t._e(),void 0!=t.editor.clipboard?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:t.HandlePasteClicked}},[i("q-item-section",[t._v("Paste")])],1):t._e(),void 0!=t.editor.selectedShapeId?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.HandleDeleteClicked(t.editor.GetSelectedShape())}}},[i("q-item-section",[t._v("Delete")])],1):t._e(),void 0!=t.editor.selectedShapeId?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.HandleVisibilityClicked(t.editor.GetSelectedShape())}}},[i("q-item-section",[t._v("Hide")])],1):t._e(),void 0!=t.editor.selectedShapeId?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.HandleLockClicked(t.editor.GetSelectedShape())}}},[i("q-item-section",[t._v("Lock")])],1):t._e()],1)],1)],1),t.editor.shapeAttributesVisible?i("ShapeAttributesSidebar",{attrs:{shape:t.editor.GetSelectedShape()}}):t._e()],1)},a=[],r=i("5e53"),l=(i("a8b5"),i("72be")),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return void 0!=t.shape?i("q-card",{staticClass:"q-pa-md bg-primary text-white",attrs:{color:"primary"}},[i("div",[i("q-card",{staticClass:"q-pa-md bg-primary text-white",staticStyle:{"text-align":"center"}},[t._v("\n      Name:\n      "),i("q-input",{staticClass:"bg-white text-black",attrs:{filled:"",dense:""},model:{value:t.shape.name,callback:function(e){t.$set(t.shape,"name",e)},expression:"shape.name"}})],1)],1),i("div",[i("q-card",{staticClass:"q-pa-md bg-primary text-white",staticStyle:{"text-align":"center"}},[t._v("\n      Fill:\n      "),i("ColorPicker",{attrs:{selectedColor:t.shape.fillColor},on:{"color-changed":t.FillColorChanged}})],1)],1),i("div",[i("q-card",{staticClass:"q-pa-md bg-primary text-white",staticStyle:{"text-align":"center"}},[t._v("\n      Border:\n      "),i("ColorPicker",{attrs:{selectedColor:t.shape.strokeColor},on:{"color-changed":t.BorderColorChanged}})],1)],1),i("div",[i("q-card",{staticClass:"q-pa-md bg-primary text-white",staticStyle:{"text-align":"center"}},[t._v("\n      Border Width:\n      "),i("q-input",{staticClass:"bg-white text-black",staticStyle:{height:"30px",display:"inline-block"},attrs:{"hide-bottom-space":"",type:"number",filled:"","input-style":"height:30px;"},model:{value:t.shape.strokeWidth,callback:function(e){t.$set(t.shape,"strokeWidth",t._n(e))},expression:"shape.strokeWidth"}})],1)],1),t._e(),t._e()]):i("q-card",{staticClass:"q-pa-md bg-primary text-white",attrs:{color:"primary"}},[t._v("A shape has not been selected")])},h=[],d=i("e2e2"),u=i("5452"),p={name:"ShapeAttributesSidebar",components:{ColorPicker:d["a"]},props:{shape:{type:Object,default:void 0}},data:function(){return{editor:r["a"].editor}},methods:{StyleColorInput:function(t){return{"background-color":t,border:"1px solid black"}},FillColorChanged:function(t){var e=new u["a"](this.editor,this.shape,{fillColor:t});e.Execute()},BorderColorChanged:function(t){var e=new u["a"](this.editor,this.shape,{strokeColor:t});e.Execute()},HandleXPositionChange:function(t){this.shape.SetPosition({x:t,y:this.shape.GetPosition().y})},HandleYPositionChange:function(t){this.shape.SetPosition({x:this.shape.GetPosition().x,y:t})},HandleWidthChange:function(t){this.shape.SetWidth(t)},HandleHeightChange:function(t){this.shape.SetHeight(t)}}},f=p,v=i("2877"),g=i("f09f"),m=i("27f9"),C=i("eebe"),k=i.n(C),y=Object(v["a"])(f,c,h,!1,null,null,null),P=y.exports;k()(y,"components",{QCard:g["a"],QInput:m["a"]});var b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md bg-primary text-white"},[i("q-toolbar",{staticClass:"bg-primary text-white shadow-2"},[i("q-toolbar-title",[t._v("Shapes")])],1),i("q-list",{staticClass:"bg-white text-black",staticStyle:{"overflow-y":"scroll",height:"500px","font-size":"10px"},attrs:{bordered:"",separator:""}},t._l(t.shapes,(function(e){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"q-my-sm",attrs:{active:t.IsSelected(e),"active-class":"selected-list-item"}},[i("q-item-section",{staticClass:"clickable",nativeOn:{click:function(i){return i.preventDefault(),t.HandleItemClicked(e)}}},[t._v(t._s(e.name))]),i("q-item-section",{staticClass:"clickable hoverable",attrs:{side:""},on:{"!click":function(i){return i.stopPropagation(),t.HandleVisibilityClicked(e)}}},[i("VisibilityIcon",{attrs:{visible:e.isVisible}})],1),i("q-item-section",{staticClass:"clickable hoverable",attrs:{side:""},on:{"!click":function(i){return i.stopPropagation(),t.HandleLockClicked(e)}}},[i("LockedIcon",{attrs:{locked:e.isLocked}})],1),i("q-item-section",{staticClass:"clickable hoverable",attrs:{side:""},on:{"!click":function(i){return i.stopPropagation(),t.HandleDeleteClicked(e)}}},[i("q-icon",{attrs:{name:"fas fa-trash-alt",color:"black"}})],1)],1)})),1)],1)},x=[],S=(i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("q-icon",{attrs:{name:"fas fa-eye",color:"black"}}):i("q-icon",{attrs:{name:"fas fa-eye-slash",color:"grey"}})}),w=[],H={name:"VisibilityIcon",props:{visible:{default:!0}}},_=H,W=i("0016"),T=Object(v["a"])(_,S,w,!1,null,null,null),E=T.exports;k()(T,"components",{QIcon:W["a"]});var q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.locked?i("q-icon",{attrs:{name:"fas fa-lock",color:"black"}}):i("q-icon",{attrs:{name:"fas fa-lock-open",color:"grey"}})},R=[],G={name:"LockedIcon",props:{locked:{default:!0}}},I=G,L=Object(v["a"])(I,q,R,!1,null,null,null),$=L.exports;k()(L,"components",{QIcon:W["a"]});var M={name:"ShapesList",components:{VisibilityIcon:E,LockedIcon:$},props:{shapes:{type:Array,default:function(){return[]}},selectedShapeId:{type:Number,default:function(){}}},methods:{IsSelected:function(t){return t.id===this.selectedShapeId},HandleItemClicked:function(t){this.$emit("item-clicked",t)},HandleDeleteClicked:function(t){this.$emit("delete-item-clicked",t)},HandleVisibilityClicked:function(t){this.$emit("visibility-clicked",t)},HandleLockClicked:function(t){this.$emit("lock-clicked",t)}}},F=M,N=(i("92df"),i("65c6")),j=i("6ac5"),O=i("1c1c"),A=i("66e5"),D=i("4074"),Q=i("714f"),V=Object(v["a"])(F,b,x,!1,null,"6afe0a56",null),B=V.exports;k()(V,"components",{QToolbar:N["a"],QToolbarTitle:j["a"],QList:O["a"],QItem:A["a"],QItemSection:D["a"],QIcon:W["a"]}),k()(V,"directives",{Ripple:Q["a"]});i("fea4"),i("d85d"),i("9b71");var K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.IsPathTool(t.editor.selectedTool)?i("PremadePathTool",{attrs:{strokeColor:t.editor.strokeColor,strokeWidth:t.editor.strokeWidth,fillColor:t.editor.fillColor,width:t.editor.width,height:t.editor.height,pathData:t.GetPathData(t.editor.selectedTool),pathName:t.GetPathName(t.editor.selectedTool)},on:{shapeCompleted:t.HandleShapeComplete}}):void 0!=t.GetCurrentTool()?i(t.GetCurrentTool(),{tag:"component",attrs:{strokeColor:t.editor.strokeColor,strokeWidth:t.editor.strokeWidth,fillColor:t.editor.fillColor,width:t.editor.width,height:t.editor.height},on:{shapeCompleted:t.HandleShapeComplete}}):t._e()},U=[],z=(i("28a5"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.HandlePan,expression:"HandlePan",modifiers:{prevent:!0,mouse:!0}}],ref:"stage",attrs:{config:t.stageConfig}},[i("v-layer",{attrs:{config:t.layerConfig}},[void 0!=t.currentEllipse?i("v-ellipse",{attrs:{config:t.currentEllipse.GetKonvaConfig()}}):t._e()],1)],1)}),J=[],X=(i("f751"),{props:{fillColor:{type:String,default:"#FFFFFF"},strokeColor:{type:String,default:"#000000"},strokeWidth:{type:Number,default:2},width:{type:Number,default:640},height:{type:Number,default:480}},data:function(){var t=500,e=this.width+t,i=this.height+t;return{stageConfig:{width:e,height:i},layerConfig:{x:e/2-this.width/2,y:i/2-this.height/2}}},methods:{GetDrawingLayer:function(){return this.$refs.stage.getNode().getLayers()[0]},GetRelativePointerCoordinates:function(t){var e=this.GetDrawingLayer();e.getStage().setPointersPositions(t.evt);var i=e.getAbsoluteTransform().copy();i.invert();var o=e.getStage().getPointerPosition();return i.point(o)},GetRelativeCoordinates:function(t){var e,i;if(t)return this.$refs.stage?(e=this.$refs.stage.$el.getBoundingClientRect().left,i=this.$refs.stage.$el.getBoundingClientRect().top):(e=this.$refs.svg.getBoundingClientRect().left,i=this.$refs.svg.getBoundingClientRect().top),t.position?{x:t.position.left-e,y:t.position.top-i}:{x:t.clientX-e,y:t.clientY-i}}}}),Y=X,Z=i("6881"),tt={name:"EllipseTool",mixins:[Y],data:function(){return{firstClickPoint:void 0,currentEllipse:void 0}},methods:{CreateStartingEllipse:function(){return new Z["a"]({type:"ellipse",position:{x:0,y:0},radius:{x:0,y:0},fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth})},HandlePan:function(t){var e=this.GetRelativePointerCoordinates(t);t.isFirst&&(this.currentEllipse=this.CreateStartingEllipse(),this.firstClickPoint=Object.assign({},e)),this.currentEllipse.radius.x=Math.abs(t.offset.x)/2,this.currentEllipse.radius.y=Math.abs(t.offset.y)/2,this.currentEllipse.position.x=this.firstClickPoint.x+t.offset.x/2,this.currentEllipse.position.y=this.firstClickPoint.y+t.offset.y/2,t.isFinal&&(this.$emit("shapeCompleted",this.currentEllipse),this.firstClickPoint=void 0,this.currentEllipse=void 0)}}},et=tt,it=i("75c3"),ot=Object(v["a"])(et,z,J,!1,null,null,null),nt=ot.exports;k()(ot,"directives",{TouchPan:it["a"]});var st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.HandlePan,expression:"HandlePan",modifiers:{prevent:!0,mouse:!0}}],ref:"stage",attrs:{config:t.stageConfig}},[i("v-layer",{attrs:{config:t.layerConfig}},[void 0!=t.currentRectangle?i("v-rect",{attrs:{config:t.currentRectangle.GetKonvaConfig()}}):t._e()],1)],1)},at=[],rt=i("b419"),lt={name:"RectangleTool",mixins:[Y],data:function(){return{firstClickPoint:void 0,currentRectangle:void 0}},methods:{CreateStartingRectangle:function(t){return new rt["a"]({type:"rectangle",position:{x:0,y:0},width:0,height:0,fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth})},HandlePan:function(t){var e=this.GetRelativePointerCoordinates(t);t.isFirst&&(this.currentRectangle=this.CreateStartingRectangle(),console.log(this.$props),console.log(this.currentRectangle),this.firstClickPoint=Object.assign({},e)),this.currentRectangle.width=Math.abs(t.offset.x),this.currentRectangle.height=Math.abs(t.offset.y),this.currentRectangle.position.x=this.firstClickPoint.x+Math.min(t.offset.x,0),this.currentRectangle.position.y=this.firstClickPoint.y+Math.min(t.offset.y,0),t.isFinal&&(this.$emit("shapeCompleted",this.currentRectangle),this.firstClickPoint=void 0,this.currentRectangle=void 0)}}},ct=lt,ht=Object(v["a"])(ct,st,at,!1,null,null,null),dt=ht.exports;k()(ht,"directives",{TouchPan:it["a"]});var ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.HandlePan,expression:"HandlePan",modifiers:{prevent:!0,mouse:!0}}],ref:"stage",attrs:{config:t.stageConfig}},[i("v-layer",{attrs:{config:t.layerConfig}},[void 0!=t.currentLine?i("v-line",{attrs:{config:t.currentLine.GetKonvaConfig()}}):t._e()],1)],1)},pt=[],ft=i("03c5"),vt={name:"LineTool",mixins:[Y],data:function(){return{currentLine:void 0,currentPointerCoordinates:void 0}},methods:{CreateStartingLine:function(){return new ft["a"]({id:1,type:"line",position:{x:0,y:0},points:[{x:0,y:0},{x:0,y:0}],strokeColor:this.strokeColor,strokeWidth:this.strokeWidth})},HandlePan:function(t){var e=this.GetRelativePointerCoordinates(t);t.isFirst&&(this.currentLine=this.CreateStartingLine(),this.currentLine.SetPoint(0,Object.assign({},e)));var i=Object.assign({},this.currentLine.points[0]);i.x+=t.offset.x,i.y+=t.offset.y,this.currentLine.SetPoint(1,Object.assign({},i)),t.isFinal&&(this.$emit("shapeCompleted",this.currentLine),this.currentLine=void 0)}}},gt=vt,mt=Object(v["a"])(gt,ut,pt,!1,null,null,null),Ct=mt.exports;k()(mt,"directives",{TouchPan:it["a"]});var kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.HandlePan,expression:"HandlePan",modifiers:{prevent:!0,mouse:!0}}],ref:"stage",attrs:{config:t.stageConfig}},[i("v-layer",{attrs:{config:t.layerConfig}},[void 0!=t.currentPolygon?i("v-line",{attrs:{config:t.currentPolygon.GetKonvaConfig()}}):t._e(),void 0!=t.currentPolygon?t._l(t.currentPolygon.points,(function(t,e){return i("v-ellipse",{key:e,attrs:{config:{x:t.x,y:t.y,radius:{x:10,y:10},fill:0===e?"red":"white",stroke:"blue"}}})})):t._e()],2)],1)},yt=[],Pt=i("6c94"),bt={name:"PolygonCanvas",mixins:[Y],data:function(){return{currentPolygon:void 0}},methods:{CreateStartingPolygon:function(){var t=new Pt["a"]({id:1,type:"polygon",points:[],fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth});return t},ConvertPointsToLines:function(){for(var t=[],e=0;e<this.currentPolygon.points.length;e++){if(e+1>=this.currentPolygon.points.length)break;t.push({point1:this.currentPolygon.points[e],point2:this.currentPolygon.points[e+1]})}return t},IsPolygonInProgress:function(){return!(void 0===this.currentPolygon||0===this.currentPolygon.points.length)},GetLastPoint:function(){return this.currentPolygon.points[this.currentPolygon.points.length-1]},HandlePan:function(t){var e=this.GetRelativePointerCoordinates(t);t.isFirst&&(this.IsPolygonInProgress()||(this.currentPolygon=this.CreateStartingPolygon(),this.currentPolygon.AddPoint(Object.assign({},e))),this.currentPolygon.AddPoint(Object.assign({},e)));var i=this.currentPolygon.points.length-1;if(this.currentPolygon.SetPoint(i,Object.assign({},e)),t.isFinal){var o=this.currentPolygon.points[0];Math.abs(e.x-o.x)<=this.currentPolygon.strokeWidth+4&&Math.abs(e.y-o.y)<=this.currentPolygon.strokeWidth+4&&(this.$emit("shapeCompleted",this.currentPolygon),this.currentPolygon=void 0)}}}},xt=bt,St=Object(v["a"])(xt,kt,yt,!1,null,null,null),wt=St.exports;k()(St,"directives",{TouchPan:it["a"]});var Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.HandlePan,expression:"HandlePan",modifiers:{prevent:!0,mouse:!0}}],ref:"stage",attrs:{config:t.stageConfig}},[i("v-layer",{attrs:{config:t.layerConfig}},[void 0!=t.currentPath?i("v-group",{attrs:{config:t.groupConfig}},[i("v-path",{attrs:{config:t.currentPath}})],1):t._e()],1),i("v-layer",{attrs:{config:{name:"hidden-layer",opacity:0}}},[i("v-path",{attrs:{config:t.CreateStartingPath()}})],1)],1)},_t=[],Wt=(i("7514"),i("7f7f"),i("6c7b"),{name:"PremadePathTool",mixins:[Y],props:{pathData:{default:void 0},pathName:{default:"path"}},data:function(){return{firstClickPoint:void 0,currentPath:void 0,originalPathWidth:void 0,originalPathHeight:void 0,groupConfig:{x:0,y:0,scale:{x:1,y:1}}}},methods:{CreateStartingPath:function(t){return{type:"path",fill:this.fillColor,stroke:this.strokeColor,strokeWidth:this.strokeWidth,strokeScaleEnabled:!1,scale:{x:1,y:1},position:{x:0,y:0},data:this.pathData}},HandlePan:function(t){if(t){var e=this.GetRelativePointerCoordinates(t);if(t.isFirst&&(this.currentPath=this.CreateStartingPath(),this.firstClickPoint=Object.assign({},e),console.log(this.firstClickPoint),this.groupConfig.x=this.firstClickPoint.x,this.groupConfig.y=this.firstClickPoint.y),this.HandlePathScaling(t),t.isFinal){var i=this.PrepareFinalPath();this.$emit("shapeCompleted",i),this.Reset()}}},HandlePathScaling:function(t){var e=this.$refs.stage.getNode().find(".hidden-layer")[0].find("Path")[0];if(e){var i=e.getClientRect();void 0===this.originalPathWidth&&(this.originalPathWidth=i.width,this.originalPathHeight=i.height);var o=t.offset.x/this.originalPathWidth,n=t.offset.y/this.originalPathHeight;this.groupConfig.scale={x:o,y:n}}},PrepareFinalPath:function(){var t=Object.assign({},this.currentPath,this.groupConfig);return t.position.x=this.groupConfig.x,t.position.y=this.groupConfig.y,t.name=this.pathName,t.fillColor=this.currentPath.fill,t.strokeColor=this.currentPath.stroke,t},Reset:function(){this.firstClickPoint=void 0,this.currentPath=void 0,this.groupConfig.scale={x:1,y:1},this.originalPathWidth=void 0,this.originalPathHeight=void 0}}}),Tt=Wt,Et=Object(v["a"])(Tt,Ht,_t,!1,null,null,null),qt=Et.exports;k()(Et,"directives",{TouchPan:it["a"]});var Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.HandlePan,expression:"HandlePan",modifiers:{prevent:!0,mouse:!0}}],ref:"stage",attrs:{config:t.stageConfig}},[i("v-layer",{attrs:{config:t.layerConfig}},[void 0!=t.currentPath?i("v-path",{attrs:{config:t.currentPath}}):t._e()],1)],1)},Gt=[],It={name:"FreePathTool",mixins:[Y],data:function(){return{firstClickPoint:void 0,currentPath:void 0,pathArr:[]}},methods:{HandlePan:function(t,e){if(console.log(t),t){var i=this.GetRelativePointerCoordinates(t);t.isFirst&&(this.currentPath="",this.firstClickPoint=Object.assign({},i),this.pathArr.push("M ".concat(this.firstClickPoint.x,",").concat(this.firstClickPoint.y))),this.pathArr.push("L ".concat(i.x,",").concat(i.y)),this.currentPath={data:this.pathArr.join(" "),stroke:this.strokeColor,fill:"rgba(255,255,255,0)",strokeWidth:this.strokeWidth},t.isFinal&&(this.$emit("shapeCompleted",{type:"path",strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,fillColor:"rgba(255,255,255,0)",data:this.pathArr.join(" ")}),this.pathArr=[],this.firstClickPoint=void 0,this.currentPath=void 0)}}}},Lt=It,$t=Object(v["a"])(Lt,Rt,Gt,!1,null,null,null),Mt=$t.exports;k()($t,"directives",{TouchPan:it["a"]});var Ft=i("6bc9"),Nt={name:"ToolController",components:{EllipseTool:nt,RectangleTool:dt,LineTool:Ct,PolygonTool:wt,PremadePathTool:qt,FreePathTool:Mt},data:function(){return{editor:r["a"].editor}},methods:{HandleShapeComplete:function(t){this.$emit("shapeCompleted",t)},IsPathTool:function(t){return void 0!==t&&"path"===t.split("-")[0]},GetPathData:function(t){var e=t.split("-")[1];return Ft["a"][e]},GetPathName:function(t){return t.split("-")[1]},GetCurrentProps:function(){var t={strokeColor:this.editor.strokeColor,strokeWidth:this.editor.strokeWidth,fillColor:this.editor.fillColor,width:this.editor.width,height:this.editor.height};return this.IsPathTool(this.editor.selectedTool)&&(t.pathData=this.GetPathData(this.editor.selectedTool),t.pathName=this.GetPathName(this.editor.selectedTool)),t},GetCurrentTool:function(){var t=this.editor.selectedTool;if(void 0!==t){if(this.IsPathTool(t))return qt;var e={ellipse:nt,rectangle:dt,line:Ct,polygon:wt,"free-draw":Mt};return e[t]}}}},jt=Nt,Ot=Object(v["a"])(jt,K,U,!1,null,null,null),At=Ot.exports,Dt=i("970b"),Qt=i.n(Dt),Vt=i("5bc3"),Bt=i.n(Vt),Kt=i("b669"),Ut=i.n(Kt),zt=i("f763"),Jt=i.n(zt),Xt=(i("10ad"),i("5df3"),i("06db"),i("cadf"),i("ac6a"),new WeakMap),Yt=new WeakMap,Zt=new WeakMap,te=new WeakMap,ee=new WeakMap,ie=function(){function t(e,i){Qt()(this,t),Xt.set(this,{writable:!0,value:void 0}),Yt.set(this,{writable:!0,value:void 0}),Zt.set(this,{writable:!0,value:void 0}),te.set(this,{writable:!0,value:void 0}),ee.set(this,{writable:!0,value:void 0}),Jt()(this,Xt,e),Jt()(this,Yt,[]),Jt()(this,Zt,[]),Jt()(this,te,!1),Jt()(this,ee,i)}return Bt()(t,[{key:"Execute",value:function(){Ut()(this,te)?Ut()(this,Xt).RestoreSnapshot(Ut()(this,Zt)):(Jt()(this,Yt,Ut()(this,Xt).GetSnapshot()),Ut()(this,Xt).AddShape(Ut()(this,ee)),Jt()(this,te,!0),Jt()(this,Zt,Ut()(this,Xt).GetSnapshot()),Ut()(this,Xt).SaveCommandHistory(this))}},{key:"Redo",value:function(){this.Execute()}},{key:"Undo",value:function(){Ut()(this,Xt).RestoreSnapshot(Ut()(this,Yt))}}]),t}(),oe=ie,ne=new WeakMap,se=new WeakMap,ae=new WeakMap,re=new WeakMap,le=new WeakMap,ce=function(){function t(e,i){Qt()(this,t),ne.set(this,{writable:!0,value:void 0}),se.set(this,{writable:!0,value:void 0}),ae.set(this,{writable:!0,value:void 0}),re.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:void 0}),Jt()(this,ne,e),Jt()(this,le,i),Jt()(this,se,[]),Jt()(this,ae,[]),Jt()(this,re,!1)}return Bt()(t,[{key:"Execute",value:function(){Ut()(this,re)?Ut()(this,ne).RestoreSnapshot(Ut()(this,ae)):(Jt()(this,se,Ut()(this,ne).GetSnapshot()),Ut()(this,ne).RemoveShape(Ut()(this,le)),Jt()(this,re,!0),Jt()(this,ae,Ut()(this,ne).GetSnapshot()),Ut()(this,ne).SaveCommandHistory(this))}},{key:"Redo",value:function(){this.Execute()}},{key:"Undo",value:function(){Ut()(this,ne).RestoreSnapshot(Ut()(this,se))}}]),t}(),he=ce,de=new WeakMap,ue=new WeakMap,pe=new WeakMap,fe=new WeakMap,ve=new WeakMap,ge=function(){function t(e,i){Qt()(this,t),de.set(this,{writable:!0,value:void 0}),ue.set(this,{writable:!0,value:void 0}),pe.set(this,{writable:!0,value:void 0}),fe.set(this,{writable:!0,value:void 0}),ve.set(this,{writable:!0,value:void 0}),Jt()(this,de,e),Jt()(this,ve,i),Jt()(this,ue,[]),Jt()(this,pe,[]),Jt()(this,fe,!1)}return Bt()(t,[{key:"Execute",value:function(){var t=this;Ut()(this,fe)?Ut()(this,de).RestoreSnapshot(Ut()(this,pe)):(Jt()(this,ue,Ut()(this,de).GetSnapshot()),Ut()(this,de).SendToFront(Ut()(this,de).shapes.find((function(e){return e.id===Ut()(t,ve)}))),Jt()(this,fe,!0),Jt()(this,pe,Ut()(this,de).GetSnapshot()),Ut()(this,de).SaveCommandHistory(this))}},{key:"Redo",value:function(){this.Execute()}},{key:"Undo",value:function(){Ut()(this,de).RestoreSnapshot(Ut()(this,ue))}}]),t}(),me=ge,Ce=new WeakMap,ke=new WeakMap,ye=new WeakMap,Pe=new WeakMap,be=new WeakMap,xe=function(){function t(e,i){Qt()(this,t),Ce.set(this,{writable:!0,value:void 0}),ke.set(this,{writable:!0,value:void 0}),ye.set(this,{writable:!0,value:void 0}),Pe.set(this,{writable:!0,value:void 0}),be.set(this,{writable:!0,value:void 0}),Jt()(this,Ce,e),Jt()(this,be,i),Jt()(this,ke,[]),Jt()(this,ye,[]),Jt()(this,Pe,!1)}return Bt()(t,[{key:"Execute",value:function(){var t=this;Ut()(this,Pe)?Ut()(this,Ce).RestoreSnapshot(Ut()(this,ye)):(Jt()(this,ke,Ut()(this,Ce).GetSnapshot()),Ut()(this,Ce).SendToBack(Ut()(this,Ce).shapes.find((function(e){return e.id===Ut()(t,be)}))),Jt()(this,Pe,!0),Jt()(this,ye,Ut()(this,Ce).GetSnapshot()),Ut()(this,Ce).SaveCommandHistory(this))}},{key:"Redo",value:function(){this.Execute()}},{key:"Undo",value:function(){Ut()(this,Ce).RestoreSnapshot(Ut()(this,ke))}}]),t}(),Se=xe,we=i("ea0b"),He={name:"PageIndex",components:{MainCanvas:l["a"],ToolController:At,ShapeList:B,ShapeAttributesSidebar:P},mounted:function(){var t=this;this.$nextTick((function(){t.AutoScrollToCenter()})),window.addEventListener("resize",(function(e){t.AutoScrollToCenter()})),this.$q.screen.lt.md&&(this.editor.shapesListVisible=!1,this.editor.shapeAttributesVisible=!1);var e={ctrl:!1,v:!1};window.addEventListener("keyup",(function(t){e.ctrl=!1,e.v=!1})),window.addEventListener("keydown",(function(i){if(i.ctrlKey&&"z"===i.key&&t.editor.Undo(),i.ctrlKey&&"y"===i.key&&t.editor.Redo(),i.ctrlKey&&"c"===i.key&&t.editor.Copy(t.editor.GetSelectedShape()),i.ctrlKey&&"v"===i.key&&!1===e.ctrl&&!1===e.v){var o=new we["a"](t.editor,{x:0,y:0});o.Execute(),e.ctrl=!0,e.v=!0}}))},data:function(){return{editor:r["a"].editor,contextClickCoordinates:void 0}},methods:{AutoScrollToCenter:function(){var t=this.$refs.canvasContainer,e=t.getElementsByClassName("konvajs-content")[0];t.scroll((e.clientWidth-t.clientWidth)/2,(e.clientHeight-t.clientHeight)/2)},SaveClickCoordinates:function(t){var e=this.$refs.drawing.GetRelativePointerCoordinates(t);this.contextClickCoordinates=e},HandleShapeComplete:function(t){var e=new oe(this.editor,t);e.Execute()},HandleListItemClick:function(t){this.editor.selectedShapeId=t.id},HandleDeleteClicked:function(t){var e=new he(this.editor,t.id);e.Execute()},HandleVisibilityClicked:function(t){t.isVisible=!t.isVisible},HandleLockClicked:function(t){t.isLocked=!t.isLocked},HandleSendToFront:function(){var t=new me(this.editor,this.editor.GetSelectedShape().id);t.Execute()},HandleSendToBack:function(){var t=new Se(this.editor,this.editor.GetSelectedShape().id);t.Execute()},HandleCopyClicked:function(){this.editor.Copy(this.editor.GetSelectedShape())},HandlePasteClicked:function(t){var e={x:this.contextClickCoordinates.x,y:this.contextClickCoordinates.y},i=new we["a"](this.editor,e);i.Execute()}}},_e=He,We=(i("cbe9"),i("4e73")),Te=i("7f67"),Ee=Object(v["a"])(_e,s,a,!1,null,"7fb3aa78",null),qe=Ee.exports;k()(Ee,"components",{QCard:g["a"],QMenu:We["a"],QList:O["a"],QItem:A["a"],QItemSection:D["a"]}),k()(Ee,"directives",{ClosePopup:Te["a"]});var Re={name:"PageIndex",components:{EditorController:qe}},Ge=Re,Ie=Object(v["a"])(Ge,o,n,!1,null,null,null);e["default"]=Ie.exports},"92df":function(t,e,i){"use strict";var o=i("0ca8"),n=i.n(o);n.a},c6fd:function(t,e,i){},cbe9:function(t,e,i){"use strict";var o=i("c6fd"),n=i.n(o);n.a}}]);